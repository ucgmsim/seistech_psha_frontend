language: python
python:
  - "3.6"            
dist: xenial
addons:
  chrome: stable
  
before_install:
  - export HOST_NAME=`hostname`
  - echo `pwd`
    #- export BRANCH_NAME=`git branch |grep \* |cut -d ' ' -f2`
    #- echo $BRANCH_NAME
  - export BRANCH_NAME=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH; else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH_NAME"
  - cd /home/travis/build/ucgmsim/
  - git clone https://github.com/ucgmsim/qcore.git

install:
  - wget -N http://chromedriver.storage.googleapis.com/85.0.4183.87/chromedriver_linux64.zip -P ~/
  - unzip ~/chromedriver_linux64.zip -d ~/
  - rm ~/chromedriver_linux64.zip
  - sudo mv -f ~/chromedriver /usr/local/share/
  - sudo chmod +x /usr/local/share/chromedriver
  - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriverâ‹®
  - pip install -r /home/travis/build/ucgmsim/seistech_psha_frontend/requirements.txt
  - pip install --no-deps ./qcore

script:
  - whereis google-chrome-stable
  - whereis chromedriver
  - cd /home/travis/build/ucgmsim/seistech_psha_frontend
  - pytest -s  
after_script:
  - ls *.zip
  - rm *.zip
